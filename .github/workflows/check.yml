name: Clarity Syntax Check

on:
  pull_request:
    paths:
      - 'contracts/**'
      - 'Clarinet.toml'

jobs:
  check:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
      
      - name: Setup Clarinet
        uses: hirosystems/clarinet-action@v1
        with:
          clarinet-version: '2.3.0'
      
      - name: Check contract syntax
        run: clarinet check
      
      - name: Verify analysis passes
        run: |
          echo "Checking for common issues..."
          clarinet check 2>&1 | tee check_output.txt
          if grep -q "error" check_output.txt; then
            echo "❌ Syntax errors found!"
            exit 1
          fi
          echo "✅ All contracts pass syntax check"
